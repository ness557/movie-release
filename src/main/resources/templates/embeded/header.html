<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.7">

    <title>Movie Notifier Service</title>

    <link href="../static/css/custom-bootstrap.css" th:href="@{/css/custom-bootstrap.css}" rel="stylesheet"/>
    <link href="../static/css/my.css" th:href="@{/css/my.css}" rel="stylesheet"/>
    <link href="../static/css/custom-navbar.css" th:href="@{/css/custom-navbar.css}" rel="stylesheet"/>
    <link href="../static/css/footer.css" th:href="@{/css/footer.css}" rel="stylesheet"/>
    <link href="../static/css/forms-with-icons.css" th:href="@{/css/forms-with-icons.css}" rel="stylesheet"/>
    <link href="../static/css/pagination.css" th:href="@{/css/pagination.css}" rel="stylesheet"/>
    <link href="../static/css/radio-buttons.css" th:href="@{/css/radio-buttons.css}" rel="stylesheet"/>
    <link href="../static/css/bootstrap-select.css" th:href="@{/css/bootstrap-select.css}" rel="stylesheet"/>
    <link href="../static/css/ajax-bootstrap-select.min.css" th:href="@{/css/ajax-bootstrap-select.min.css}" rel="stylesheet"/>

    <script src="../static/js/jquery.slim.min.js" th:src="@{/js/jquery.slim.min.js}"></script>
    <script src="../static/js/jquery.min.js" th:src="@{/js/jquery.min.js}"></script>
    <script src="../static/js/bootstrap.bundle.js" th:src="@{/js/bootstrap.bundle.js}"></script>
    <script src="../static/js/bootstrap-select.min.js" th:src="@{/js/bootstrap-select.min.js}"></script>
    <script src="../static/js/ajax-bootstrap-select.min.js" th:src="@{/js/ajax-bootstrap-select.min.js}"></script>

    <link href="../static/css/fonts/Roboto.css" th:href="@{/css/fonts/Roboto.css}" rel="stylesheet"/>
    <link href="../static/css/fonts/OpenSans.css" th:href="@{/css/fonts/OpenSans.css}" rel="stylesheet"/>

    <script th:inline="javascript">
        function unsubscribe(event) {

            var form = $(this);
            var tmdbId = form.find('input').val();

            $.post('/user/unSubscribe', form.serialize());

            var par = form.parent();
            par.html(
                '<form class="subsForm" action="/user/subscribe" method="post" class="subsForm">' +
                '    <input type="hidden" name="tmdbId" value="' + tmdbId + '"/>' +
                '    <input type="submit" value="' + [[#{lang.subscribe}]] + '" class="btn btn-warning"/>' +
                '</form>'
            );
            var newForm = par.find(".subsForm");
            newForm.on('submit', subscribe);
            return false;
        }

        function subscribe(event) {

            var form = $(this);
            var tmdbId = form.find('input').val();

            $.post('/user/subscribe', $(this).serialize());

            var par = form.parent();
            par.html(
                '<form class="unSubsForm" action="/user/unSubscribe" method="post" class="unSubsForm">' +
                '    <input type="hidden" name="tmdbId" value="' + tmdbId + '"/>' +
                '    <input type="submit" value="' + [[#{lang.unsubscribe}]] + '" class="btn btn-danger"/>' +
                '</form>'
            );
            var newForm = par.find(".unSubsForm");
            newForm.on('submit', unsubscribe);
            return false;
        }

        jQuery(document).ready(function () {

            var offset = 250;
            var duration = 300;

            jQuery(window).scroll(function () {

                if (jQuery(this).scrollTop() > offset) {
                    jQuery(".back-to-top").fadeIn(duration);
                } else {
                    jQuery(".back-to-top").fadeOut(duration);
                }
            });

            jQuery(".back-to-top")
                .click(function (event) {
                    event.preventDefault();
                    jQuery("html, body").animate({scrollTop: 0}, duration);
                    return false;
                })
                .fadeOut(0);


        });
    </script>

</head>