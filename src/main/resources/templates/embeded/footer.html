<footer class="navbar fixed-bottom navbar-expand navbar-light bg-light-my" xmlns:th="http://www.w3.org/1999/xhtml">

    <!-- Links -->
    <div class="collapse navbar-collapse" id="nav-content">

        <th:block sec:authorize="isAuthenticated()">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item mr-auto dropup">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <img style="width: 20px;" th:src="@{/img/language-dark.png}"/>
                        <th:block th:text="#{'lang.' + ${language.value}}"/>
                    </a>
                    <div class="dropdown-menu"
                         aria-labelledby="navbarDropdown">

                        <a href="#" class="dropdown-item languageSelect"
                           th:each="lang : ${T(com.ness.movie_release_web.model.wrapper.tmdb.Language).values()}">
                            <option class="langVal"
                                    th:value="${lang}"
                                    th:text="#{'lang.' + ${lang.value}}"
                                    th:selected="${lang == language}">
                            </option>
                        </a>
                    </div>
                </li>
            </ul>


            <ul class="navbar-nav ml-auto">

                <li class="nav-item" style="padding: 10px 15px 10px 0;">
                    <a class="footer-link" href="/user/discover" th:text="#{lang.discover_movies}"></a>
                </li>
                <li class="nav-item" style="padding: 10px 15px 10px 0;">
                    <a class="footer-link" href="/user/subscriptions" th:text="#{lang.my_subscriptions}"></a>
                </li>
                <li class="nav-item" style="padding: 10px 15px 10px 0;">
                    <a class="footer-link" th:text="#{lang.talk_to-bot}"
                       th:href="'tg://resolve?domain=' + ${@environment.getProperty('telegram.bot')}">Talk to bot</a>
                </li>
            </ul>
        </th:block>
    </div>


    <script>
        $('.languageSelect').click(function () {
            var langVal = $(this).find(".langVal").val()
                $.post("/user/setLanguage", {"language": langVal}, function () {
                    setTimeout(20);
                    location.reload();
                });
            }
        )
    </script>
</footer>